<!--
 * @Descripttion: 
 * @version: 
 * @Author: Li Jiaxin
 * @Date: 2021-09-12 16:38:41
 * @LastEditors: Li Jiaxin
 * @LastEditTime: 2021-09-14 21:51:11
-->

# 数组
- 相当于vector的低级版，**长度固定**。

## 定义和初始化内置数组

- 初始化：`char input_buffer[buffer_size];`，长度必须是const表达式，或者不写，让编译器自己推断。
- 数组不允许直接赋值给另一个数组。
- 默认情况，数组元素被默认初始化。
- 数组的元素应为对象，不能是引用。

### 显示初始化数组
&ensp;&ensp;如果指明维度，初始值数量小于等于维度；维度比初始值大，用提供的初值初始化靠前的元素。

### 字符数组的特殊性
&ensp;&ensp;可以用字面值字符串对字符数组进行初始化
```cpp
char a[] = "C++";
char b[6] = "Daniel";// 错误，字符串字面值最后有个'\0'，即有7个元素。
```


### 不允许拷贝和赋值
&ensp;&ensp;不能将数组的内容拷贝给其他数组作为其初始值，也不能用数组为其他数组赋值。

### 理解复杂的数组声明

&ensp;&ensp;见如下代码
```CPP
int *ptrs[10]; //ptrs是含有10个整型指针的数组
int &refs[10];// 错误，不存在数组元素为引用的数组
int (*parray)[10] =&arr;// 由内向外读，*parray意味着parray是个指针，然后往右读parray是个指向大小为10的数组的指针，指向int数组
int (&arrRef)[10] = arr;// 引用一个含义10个int元素的数组arr
int *(&arry)[10] = ptrs;// arry是数组的引用，该数组含有10个指针
```

## 访问数组元素

- 数组下标的类型：`size_t` 。
- 字符数组的特殊性：结尾处有一个空字符，如 `char a[] = "hello";` 。
- 用数组初始化 `vector`： `int a[] = {1,2,3,4,5}; vector<int> v(begin(a), end(a));` 。

## 指针和数组

- 使用数组名字时，编译器一般会把它转换成指针。

```cpp
int ia[] = {0,1,2,3,4,5,6,7,8,9};
auto ia2(ia); // ia2是一个整型指针，指向ia的第一个元素
decltype(ia) ia3 =  {0,1,2,3,4,5,6,7,8,9};//使用decltype返回的类型则是数组
```

- 指针也是迭代器，可以支持类似运算。
- 标准库函数begin()和end()
```cpp
int ia[] = {0,1,2,3,4,5,6,7,8,9};
int *beg = begin(ia); // 指向ia的首元素的指针
int *last = end(ia);//指向ia尾元素的下一个位置的指针。
// 尾后指针不可以进行解引用和递增操作
```

- 指针进行运算：参与运算的指针要指向同一个数组当中的元素。两个指针相减的类型是`ptrdiff_t`。
- 对数组执行下标运算实际是对指向数组元素的指针进行下标运算。

## C风格字符串

- 字符串字面值，char数组，从C继承来的字符串。
- 用空字符结束（`\0`）。
- 对大多数应用来说，使用标准库 `string`比使用C风格字符串更安全、更高效。
- 获取 `string` 中的 `cstring` ： `const char *str = s.c_str();`c_str()函数返回值是一个c风格的字符串，即一个指针，指针类型是const char*，确保我们不会改变其内容。
- 一般利用指针来操作字符串字面值。
- 允许使用以空字符结束的数组来初始化string或者给string对象赋值。

C标准库String函数，定义在`<cstring>` 中：

| 函数 | 介绍 |
|-----|-----|
| `strlen(p)` | 返回`p`的长度，空字符不计算在内 |
| `strcmp(p1, p2)` | 比较`p1`和`p2`的相等性。如果`p1==p2`，返回0；如果`p1>p2`，返回一个正值；如果`p1<p2`，返回一个负值。 |
| `strcat(p1, p2)` | 将`p2`附加到`p1`之后，返回`p1` |
| `strcpy(p1, p2)` | 将`p2`拷贝给`p1`，返回`p1` |



## 多维数组

- **多维数组的初始化**： `int ia[3][4] = {{0,1,2,3}, ...}`。
- 使用范围for语句时，除了最内层的循环外，其他所有循环的控制变量都应该是引用类型。
```cpp
for(auto row:ia)
    for(auto col:row){
// 此代码无法编译，row是大小为4的数组，由于row不是引用类型，那么在第二个for循环时，row会自动转化为指针，显然内存循环就不合法了
    }

```